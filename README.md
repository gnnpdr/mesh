# mesh

сначала пишем структуру точки - vec3. добавляем все нужные операции и тесты для них

затем mesh структуру. пока заниваемяс только vertex clusterом нам бостаточно хранить только вершины и треугольники. плюс добавим методы для дополнения, оставив инкапсуляцию.

теперь пишем парсер. obj формат довольно простой. он построчный и первым компонентом содержит обозначение того, что быыдет дальше в строке: 
v — вершина, vt — текстурные координаты, vn — нормаль, f — грань
f всегда ссылается именно на int, то есть на позиции в списке вершин

нужно еще учесть, что индексы могут быть отрицательными. это связано с тем, что берутся относительные индексы - с другого конца вектора - последние добавленные. еще раз - последние добавленные, а не просто последние, поэтому это и должно быть обрботано в процессе парсинга.

 // пока что мы задаем без нормалей и текстурных координат, вообще формат будет типа v/vt/vn или v//vn 
                    //или просто v, поэтому он должен просто пройтись без /

при парсинге также нужно все триангулировать, потому что обычно в obj файлах встречается деление face не на треугольники, а на что-то другое. поэтому в процессе придется проводить триангуляцию

причем индексы в obj отсчитываются с 1, поэтомы при заполнении face мы будем вычитать 1, чтобы потом просто обращатья по индексу. круто, правда?


для файла
# Вершины куба
v -1 -1 -1  # 0
v  1 -1 -1  # 1
v  1  1 -1  # 2
v -1  1 -1  # 3
v -1 -1  1  # 4
v  1 -1  1  # 5
v  1  1  1  # 6
v -1  1  1  # 7

# Треугольники (12 штук)
# Передняя грань (-Z)
f 1 2 3
f 3 4 1
# Правая грань (+X)
f 2 6 7
f 7 3 2
# Задняя грань (+Z)
f 6 5 8
f 8 7 6
# Левая грань (-X)
f 5 1 4
f 4 8 5
# Верхняя грань (+Y)
f 4 3 7
f 7 8 4
# Нижняя грань (-Y)
f 5 6 2
f 2 1 5

выдало 
vertices
-1 -1 -1
1 -1 -1
1 1 -1
-1 1 -1
-1 -1 1
1 -1 1
1 1 1
-1 1 1
triangles
0 1 2
2 3 0
1 5 6
6 2 1
5 4 7
7 6 5
4 0 3
3 7 4
3 2 6
6 7 3
4 5 1
1 0 4

для файла
# Вершины куба
v -1 -1 -1  # 0
v  1 -1 -1  # 1
v  1  1 -1  # 2
v -1  1 -1  # 3
v -1 -1  1  # 4
v  1 -1  1  # 5
v  1  1  1  # 6
v -1  1  1  # 7

f 1 2 3 4
f 5 6 7 8
f 1 2 6 5
f 2 3 7 6
f 3 4 8 7
f 4 1 5 8

выдало
vertices
-1 -1 -1
1 -1 -1
1 1 -1
-1 1 -1
-1 -1 1
1 -1 1
1 1 1
-1 1 1
triangles
0 1 2
0 2 3
4 5 6
4 6 7
0 1 5
0 5 4
1 2 6
1 6 5
2 3 7
2 7 6
3 0 4
3 4 7

в общем, работает правильно, триангулирует